!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.PubSub=e():t.PubSub=e()}(this,(function(){return(()=>{"use strict";var t={412:(t,e,n)=>{function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(775),i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"set",value:function(t,e,n){for(var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",u=t.split(i),c=n,s=n,f=0;f<u.length;f++){var a=u[f];if(0===a.length)throw new o.default('"'.concat(t,'" is not a valid property path.'));void 0===c[a]&&(c[a]={}),s=c,c=c[a],r=a}return s[r]=e,n}},{key:"get",value:function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",r=t.split(n),i=e,u=0;u<r.length;u++){var c=r[u];if(0===c.length)throw new o.default('"'.concat(t,'" is not a valid property path.'));if(void 0===i[c])return null;i=i[c]}return i}}],n&&r(e.prototype,n),t}();e.default=i},775:(t,e)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function o(t){var e="function"==typeof Map?new Map:void 0;return o=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return i(t,arguments,s(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),c(r,t)},o(t)}function i(t,e,n){return i=u()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&c(o,n.prototype),o},i.apply(null,arguments)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function c(t,e){return c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},c(t,e)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}Object.defineProperty(e,"__esModule",{value:!0});var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(i,t);var e,n,o=(e=i,n=u(),function(){var t,o=s(e);if(n){var i=s(this).constructor;t=Reflect.construct(o,arguments,i)}else t=o.apply(this,arguments);return r(this,t)});function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).name="InvalidParameterException",e}return i}(o(Error));e.default=f},66:(t,e)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return o(t)}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){var e="function"==typeof Map?new Map:void 0;return i=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return u(t,arguments,f(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s(r,t)},i(t)}function u(t,e,n){return u=c()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&s(o,n.prototype),o},u.apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function s(t,e){return s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},s(t,e)}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(u,t);var e,n,i=(e=u,n=c(),function(){var t,o=f(e);if(n){var i=f(this).constructor;t=Reflect.construct(o,arguments,i)}else t=o.apply(this,arguments);return r(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t)).name=e.constructor.name,Error.captureStackTrace(o(e),e.constructor),e}return u}(i(Error));e.default=a},131:(t,e)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return o(t)}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){var e="function"==typeof Map?new Map:void 0;return i=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return u(t,arguments,f(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s(r,t)},i(t)}function u(t,e,n){return u=c()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&s(o,n.prototype),o},u.apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function s(t,e){return s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},s(t,e)}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(u,t);var e,n,i=(e=u,n=c(),function(){var t,o=f(e);if(n){var i=f(this).constructor;t=Reflect.construct(o,arguments,i)}else t=o.apply(this,arguments);return r(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,'Unable to add subscription "'.concat(t,'" to component "').concat(e,'" because it already manage a subscription with same id.'))).name=n.constructor.name,Error.captureStackTrace(o(n),n.constructor),n}return u}(i(Error));e.default=a},113:(t,e)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return o(t)}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){var e="function"==typeof Map?new Map:void 0;return i=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return u(t,arguments,f(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s(r,t)},i(t)}function u(t,e,n){return u=c()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&s(o,n.prototype),o},u.apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function s(t,e){return s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},s(t,e)}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(u,t);var e,n,i=(e=u,n=c(),function(){var t,o=f(e);if(n){var i=f(this).constructor;t=Reflect.construct(o,arguments,i)}else t=o.apply(this,arguments);return r(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,'Unable to find subscription with id "'.concat(t,'" in component "').concat(e,'".'))).name=n.constructor.name,Error.captureStackTrace(o(n),n.constructor),n}return u}(i(Error));e.default=a},322:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.subscribeFromObject=void 0;var r=new(n(412).default);e.subscribeFromObject=function(t,e,n){Object.values(n).forEach((function(n){var o=t[n.action];if("function"==typeof o){var i=o.bind(t);t.subscribe(e,n.notification,(function(t){var e={};if(void 0!==n.mapAttributes){var o=n.mapAttributes;Object.keys(o).forEach((function(n){var i,u=null!==(i=o[n])&&void 0!==i?i:"";e[n]=r.get(u,t)})),i(e)}else i(t)}))}}))}},537:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ROLE=e.findSubscriptionByRoleAndComponentId=void 0;var r=n(66);e.findSubscriptionByRoleAndComponentId=function(t,n,o){if(n!==e.ROLE.PUBLISHER_ID&&n!==e.ROLE.SUBSCRIBER_ID)throw new r.default('Invalid argument given for "role" in "findSubscriptionByRoleAndComponentId". Values expected are "publisher_id" or "subscriber_id" but "'.concat(n,'" was given.'));return t.getSubscriptions().filter((function(t){return(n===e.ROLE.PUBLISHER_ID?t.publisher_id:t.subscriber_id)===o}))},e.ROLE={PUBLISHER_ID:"publisher_id",SUBSCRIBER_ID:"subscriber_id"}},986:(t,e,n)=>{function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(829),i=n(757),u=n(537),c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.publisher=new o.default(e),this.subscriber=new i.default(e)}var e,n;return e=t,(n=[{key:"hasSubscription",value:function(t){return this.subscriber.hasSubscription(t)||this.publisher.hasSubscription(t)}},{key:"addSubscriber",value:function(t,e){this.publisher.addSubscriber(t,e)}},{key:"removeSubscriber",value:function(t){this.publisher.removeSubscriber(t)}},{key:"getNbSubscriptionsAsPublisher",value:function(){return this.publisher.getNbSubscriptions()}},{key:"getNbSubscriptionsAsSubscriber",value:function(){return this.subscriber.getNbSubscriptions()}},{key:"publish",value:function(t,e){this.publisher.publish(t,e)}},{key:"getId",value:function(){return this.id}},{key:"subscribe",value:function(t,e,n){this.subscriber.subscribe.apply(this,[t,e,n])}},{key:"getNbSubscriptions",value:function(){return this.subscriber.getNbSubscriptions()}},{key:"removeSubscription",value:function(t){this.subscriber.removeSubscription(t)}},{key:"addSubscription",value:function(t,e){this.subscriber.addSubscription(t,e)}},{key:"waitUntil",value:function(t){return this.subscriber.waitUntil(t)}},{key:"destroy",value:function(){this.publisher.destroy(),this.subscriber.destroy()}},{key:"is",value:function(t){return this.id===t}},{key:"findSubscriptionById",value:function(t){return this.subscriber.findSubscriptionById(t)||this.publisher.findSubscriptionById(t)}},{key:"findSubscriptionsByNotificationAndPublisherId",value:function(t,e){return this.subscriber.findSubscriptionsByNotificationAndPublisherId(t,e)}},{key:"findSubscriptionsByNotification",value:function(t){return this.subscriber.findSubscriptionsByNotification(t).concat(this.publisher.findSubscriptionsByNotification(t))}},{key:"getSubscriptions",value:function(){return this.subscriber.getSubscriptions().concat(this.publisher.getSubscriptions())}},{key:"unsubscribeFromNotification",value:function(t){this.subscriber.unsubscribeFromNotification(t)}},{key:"unsubscribeFromPublisherId",value:function(t){this.subscriber.unsubscribeFromPublisherId(t)}},{key:"unsubscribeFromSubscriptionId",value:function(t){this.subscriber.unsubscribeFromSubscriptionId(t)}},{key:"continuePublicationOnException",value:function(){this.publisher.continuePublicationOnException()}},{key:"findSubscriptionByPublisherId",value:function(t){var e=this.subscriber.findSubscriptionByPublisherId(t).concat((0,u.findSubscriptionByRoleAndComponentId)(this.publisher,u.ROLE.PUBLISHER_ID,t));return t===this.getId()?Array.from(new Set(e)):e}},{key:"findSubscriptionsByNotificationAndSubscriberId",value:function(t,e){return this.publisher.findSubscriptionsByNotificationAndSubscriberId(t,e)}},{key:"findSubscriptionBySubscriberId",value:function(t){var e=this.publisher.findSubscriptionBySubscriberId(t).concat((0,u.findSubscriptionByRoleAndComponentId)(this.subscriber,u.ROLE.SUBSCRIBER_ID,t));return t===this.getId()?Array.from(new Set(e)):e}},{key:"stopPublicationOnException",value:function(){this.publisher.stopPublicationOnException()}}])&&r(e.prototype,n),t}();e.default=c},829:(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},u(t,e)}function c(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}Object.defineProperty(e,"__esModule",{value:!0});var f=n(657),a=n(537),l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(p,t);var e,n,r,f,l=(r=p,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(r);if(f){var n=s(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return c(this,t)});function p(){var t;return o(this,p),(t=l.apply(this,arguments)).shouldIStopPublicationOnException=!1,t}return e=p,(n=[{key:"stopPublicationOnException",value:function(){this.shouldIStopPublicationOnException=!0}},{key:"continuePublicationOnException",value:function(){this.shouldIStopPublicationOnException=!1}},{key:"publish",value:function(t,e){var n=this,r=this.notificationsCollection[t];Array.isArray(r)&&r.slice(0).forEach((function(t){try{t.handler(e)}catch(t){if(n.shouldIStopPublicationOnException)throw t}}))}},{key:"findSubscriptionBySubscriberId",value:function(t){return(0,a.findSubscriptionByRoleAndComponentId)(this,a.ROLE.SUBSCRIBER_ID,t)}},{key:"findSubscriptionsByNotificationAndSubscriberId",value:function(t,e){return this.findSubscriptionsByNotification(t).filter((function(t){return t.subscriber_id===e}))}},{key:"addSubscriber",value:function(t,e){this.addSubscription(t,e)}},{key:"removeSubscriber",value:function(t){this.clearSubscription(t)}}])&&i(e.prototype,n),p}(f.default);e.default=l},757:(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},u(t,e)}function c(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}Object.defineProperty(e,"__esModule",{value:!0});var f=n(657),a=n(113),l=n(537),p=0,b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(y,t);var e,n,r,f,b=(r=y,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(r);if(f){var n=s(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return c(this,t)});function y(){return o(this,y),b.apply(this,arguments)}return e=y,(n=[{key:"unsubscribeFromSubscriptionId",value:function(t){var e=this.findSubscriptionById(t);if(null===e)throw new a.default(t,this.getId());e.unsubscribe()}},{key:"findSubscriptionByPublisherId",value:function(t){return(0,l.findSubscriptionByRoleAndComponentId)(this,l.ROLE.PUBLISHER_ID,t)}},{key:"unsubscribeFromPublisherId",value:function(t){this.findSubscriptionByPublisherId(t).map((function(t){return t.unsubscribe})).forEach((function(t){t()}))}},{key:"unsubscribeFromNotification",value:function(t){this.findSubscriptionsByNotification(t).map((function(t){return t.unsubscribe})).forEach((function(t){t()}))}},{key:"subscribe",value:function(t,e,n){var r=this,o=this.getNbSubscriptions(),i="sub_".concat(this.getId(),"_to_").concat(t.getId(),"_salt_").concat(o),u={id:i,subscriber_id:this.getId(),publisher_id:t.getId(),unsubscribe:function(){t.removeSubscriber(i),r.removeSubscription(i)},handler:n};this.addSubscription(e,u),t.addSubscriber(e,u)}},{key:"getNbSubscriptions",value:function(){return this.nbSubscriptionRecorded}},{key:"removeSubscription",value:function(t){this.clearSubscription(t)}},{key:"waitUntil",value:function(t){var e=new y("wait-until-".concat(t.map((function(t){return t.name})).join("-and-"),"-salt_").concat(p++));return new Promise((function(n){Promise.all(t.map((function(t){return new Promise((function(n){e.subscribe(t.from,t.name,(function(){n()}))}))}))).then((function(t){e.destroy(),n(t)}))}))}},{key:"findSubscriptionsByNotificationAndPublisherId",value:function(t,e){return this.findSubscriptionsByNotification(t).filter((function(t){return t.publisher_id===e}))}}])&&i(e.prototype,n),y}(f.default);e.default=b},657:(t,e,n)=>{function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(131),i=n(113),u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.subscriptionsList={},this.notificationsCollection={},this.nbSubscriptionRecorded=0,this.id=e}var e,n;return e=t,(n=[{key:"getSubscriptions",value:function(){return[].concat.apply([],Object.values(this.notificationsCollection))}},{key:"getNbSubscriptions",value:function(){return this.nbSubscriptionRecorded}},{key:"hasSubscription",value:function(t){return void 0!==this.subscriptionsList[t]}},{key:"recordSubscription",value:function(t,e){this.subscriptionsList[t]=e}},{key:"findSubscriptionIndexById",value:function(t){var e=this.subscriptionsList[t],n={index:-1,notification:null!=e?e:""};if(void 0===e)return n;var r=this.notificationsCollection[e];return Array.isArray(r)&&(n.index=r.findIndex((function(e){return e.id===t}))),n}},{key:"findSubscriptionById",value:function(t){var e=this.findSubscriptionIndexById(t);return e.index<0?null:this.notificationsCollection[e.notification][e.index]}},{key:"findSubscriptionsByNotification",value:function(t){return this.notificationsCollection[t]||[]}},{key:"clearSubscription",value:function(t){var e=this.findSubscriptionIndexById(t);if(e.index<0)throw new i.default(t,this.getId());var n=this.notificationsCollection[e.notification].splice(e.index,1)[0];"function"==typeof n.handler&&delete n.handler,delete this.subscriptionsList[t],this.nbSubscriptionRecorded--,0===this.notificationsCollection[e.notification].length&&delete this.notificationsCollection[e.notification]}},{key:"addSubscription",value:function(t,e){if(!0!==Array.isArray(this.notificationsCollection[t])&&(this.notificationsCollection[t]=[]),this.hasSubscription(e.id))throw new o.default(e.id,this.getId());this.notificationsCollection[t].push(e),this.recordSubscription(e.id,t),this.nbSubscriptionRecorded++}},{key:"getId",value:function(){return this.id}},{key:"is",value:function(t){return t===this.getId()}},{key:"destroy",value:function(){Object.values(this.notificationsCollection).forEach((function(t){t.forEach((function(t){return t.unsubscribe()}))}))}}])&&r(e.prototype,n),t}();e.default=u}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}var r={};return(()=>{var t=r;Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionNotFoundException=t.SubscriptionAlreadyExistsException=t.InvalidArgumentException=t.SubscriberHelper=t.PublisherSubscriber=t.Subscriber=t.Publisher=void 0;var e=n(829);Object.defineProperty(t,"Publisher",{enumerable:!0,get:function(){return e.default}});var o=n(757);Object.defineProperty(t,"Subscriber",{enumerable:!0,get:function(){return o.default}});var i=n(986);Object.defineProperty(t,"PublisherSubscriber",{enumerable:!0,get:function(){return i.default}}),t.SubscriberHelper=n(322);var u=n(66);Object.defineProperty(t,"InvalidArgumentException",{enumerable:!0,get:function(){return u.default}});var c=n(131);Object.defineProperty(t,"SubscriptionAlreadyExistsException",{enumerable:!0,get:function(){return c.default}});var s=n(113);Object.defineProperty(t,"SubscriptionNotFoundException",{enumerable:!0,get:function(){return s.default}})})(),r})()}));