!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.PubSub=n():t.PubSub=n()}(this,(function(){return function(){"use strict";var t={412:function(t,n,e){function r(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(775),i=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,e;return n=t,e=[{key:"set",value:function(t,n,e){for(var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",u=t.split(i),c=e,s=e,f=0;f<u.length;f++){var a=u[f];if(0===a.length)throw new o.default('"'.concat(t,'" is not a valid property path.'));void 0===c[a]&&(c[a]={}),s=c,c=c[a],r=a}return s[r]=n,e}},{key:"get",value:function(t,n){for(var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",r=t.split(e),i=n,u=0;u<r.length;u++){var c=r[u];if(0===c.length)throw new o.default('"'.concat(t,'" is not a valid property path.'));if(void 0===i[c])return null;i=i[c]}return i}}],e&&r(n.prototype,e),t}();n.default=i},775:function(t,n){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function r(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function o(t){var n="function"==typeof Map?new Map:void 0;return o=function(t){if(null===t||(e=t,-1===Function.toString.call(e).indexOf("[native code]")))return t;var e;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,r)}function r(){return i(t,arguments,s(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),c(r,t)},o(t)}function i(t,n,e){return i=u()?Reflect.construct:function(t,n,e){var r=[null];r.push.apply(r,n);var o=new(Function.bind.apply(t,r));return e&&c(o,e.prototype),o},i.apply(null,arguments)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function c(t,n){return c=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},c(t,n)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}Object.defineProperty(n,"__esModule",{value:!0});var f=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&c(t,n)}(i,t);var n,e,o=(n=i,e=u(),function(){var t,o=s(n);if(e){var i=s(this).constructor;t=Reflect.construct(o,arguments,i)}else t=o.apply(this,arguments);return r(this,t)});function i(t){var n;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,t)).name="InvalidParameterException",n}return i}(o(Error));n.default=f},66:function(t,n){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function r(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return o(t)}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){var n="function"==typeof Map?new Map:void 0;return i=function(t){if(null===t||(e=t,-1===Function.toString.call(e).indexOf("[native code]")))return t;var e;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,r)}function r(){return u(t,arguments,f(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s(r,t)},i(t)}function u(t,n,e){return u=c()?Reflect.construct:function(t,n,e){var r=[null];r.push.apply(r,n);var o=new(Function.bind.apply(t,r));return e&&s(o,e.prototype),o},u.apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function s(t,n){return s=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},s(t,n)}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&s(t,n)}(u,t);var n,e,i=(n=u,e=c(),function(){var t,o=f(n);if(e){var i=f(this).constructor;t=Reflect.construct(o,arguments,i)}else t=o.apply(this,arguments);return r(this,t)});function u(t){var n;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t)).name=n.constructor.name,Error.captureStackTrace(o(n),n.constructor),n}return u}(i(Error));n.default=a},131:function(t,n){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function r(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return o(t)}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){var n="function"==typeof Map?new Map:void 0;return i=function(t){if(null===t||(e=t,-1===Function.toString.call(e).indexOf("[native code]")))return t;var e;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,r)}function r(){return u(t,arguments,f(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s(r,t)},i(t)}function u(t,n,e){return u=c()?Reflect.construct:function(t,n,e){var r=[null];r.push.apply(r,n);var o=new(Function.bind.apply(t,r));return e&&s(o,e.prototype),o},u.apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function s(t,n){return s=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},s(t,n)}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&s(t,n)}(u,t);var n,e,i=(n=u,e=c(),function(){var t,o=f(n);if(e){var i=f(this).constructor;t=Reflect.construct(o,arguments,i)}else t=o.apply(this,arguments);return r(this,t)});function u(t,n){var e;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,'Unable to add subscription "'.concat(t,'" to component "').concat(n,'" because it already manage a subscription with same id.'))).name=e.constructor.name,Error.captureStackTrace(o(e),e.constructor),e}return u}(i(Error));n.default=a},113:function(t,n){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function r(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return o(t)}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){var n="function"==typeof Map?new Map:void 0;return i=function(t){if(null===t||(e=t,-1===Function.toString.call(e).indexOf("[native code]")))return t;var e;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,r)}function r(){return u(t,arguments,f(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s(r,t)},i(t)}function u(t,n,e){return u=c()?Reflect.construct:function(t,n,e){var r=[null];r.push.apply(r,n);var o=new(Function.bind.apply(t,r));return e&&s(o,e.prototype),o},u.apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function s(t,n){return s=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},s(t,n)}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&s(t,n)}(u,t);var n,e,i=(n=u,e=c(),function(){var t,o=f(n);if(e){var i=f(this).constructor;t=Reflect.construct(o,arguments,i)}else t=o.apply(this,arguments);return r(this,t)});function u(t,n){var e;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,'Unable to find subscription with id "'.concat(t,'" in component "').concat(n,'".'))).name=e.constructor.name,Error.captureStackTrace(o(e),e.constructor),e}return u}(i(Error));n.default=a},322:function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0}),n.subscribeFromObject=void 0;var r=new(e(412).default);n.subscribeFromObject=function(t,n,e){Object.values(e).forEach((function(e){var o=t[e.action];if("function"==typeof o){var i=o.bind(t);t.subscribe(n,e.notification,(function(t){var n={};if(void 0!==e.mapAttributes){var o=e.mapAttributes;Object.keys(o).forEach((function(e){var i,u=null!==(i=o[e])&&void 0!==i?i:"";n[e]=r.get(u,t)})),i(n)}else i(t)}))}}))}},537:function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0}),n.ROLE=n.findSubscriptionByRoleAndComponentId=void 0;var r=e(66);n.findSubscriptionByRoleAndComponentId=function(t,e,o){if(e!==n.ROLE.PUBLISHER_ID&&e!==n.ROLE.SUBSCRIBER_ID)throw new r.default('Invalid argument given for "role" in "findSubscriptionByRoleAndComponentId". Values expected are "publisher_id" or "subscriber_id" but "'.concat(e,'" was given.'));return t.getSubscriptions().filter((function(t){return(e===n.ROLE.PUBLISHER_ID?t.publisher_id:t.subscriber_id)===o}))},n.ROLE={PUBLISHER_ID:"publisher_id",SUBSCRIBER_ID:"subscriber_id"}},986:function(t,n,e){function r(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(829),i=e(757),u=e(537),c=function(){function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=n,this.publisher=new o.default(n),this.subscriber=new i.default(n)}var n,e;return n=t,(e=[{key:"hasSubscription",value:function(t){return this.subscriber.hasSubscription(t)||this.publisher.hasSubscription(t)}},{key:"addSubscriber",value:function(t,n){this.publisher.addSubscriber(t,n)}},{key:"removeSubscriber",value:function(t){this.publisher.removeSubscriber(t)}},{key:"getNbSubscriptionsAsPublisher",value:function(){return this.publisher.getNbSubscriptions()}},{key:"getNbSubscriptionsAsSubscriber",value:function(){return this.subscriber.getNbSubscriptions()}},{key:"publish",value:function(t,n){this.publisher.publish(t,n)}},{key:"getId",value:function(){return this.id}},{key:"subscribe",value:function(t,n,e){this.subscriber.subscribe.apply(this,[t,n,e])}},{key:"getNbSubscriptions",value:function(){return this.subscriber.getNbSubscriptions()}},{key:"removeSubscription",value:function(t){this.subscriber.removeSubscription(t)}},{key:"addSubscription",value:function(t,n){this.subscriber.addSubscription(t,n)}},{key:"waitUntil",value:function(t){return this.subscriber.waitUntil(t)}},{key:"destroy",value:function(){this.publisher.destroy(),this.subscriber.destroy()}},{key:"is",value:function(t){return this.id===t}},{key:"findSubscriptionById",value:function(t){return this.subscriber.findSubscriptionById(t)||this.publisher.findSubscriptionById(t)}},{key:"findSubscriptionsByNotificationAndPublisherId",value:function(t,n){return this.subscriber.findSubscriptionsByNotificationAndPublisherId(t,n)}},{key:"findSubscriptionsByNotification",value:function(t){return this.subscriber.findSubscriptionsByNotification(t).concat(this.publisher.findSubscriptionsByNotification(t))}},{key:"getSubscriptions",value:function(){return this.subscriber.getSubscriptions().concat(this.publisher.getSubscriptions())}},{key:"unsubscribeFromNotification",value:function(t){this.subscriber.unsubscribeFromNotification(t)}},{key:"unsubscribeFromPublisherId",value:function(t){this.subscriber.unsubscribeFromPublisherId(t)}},{key:"unsubscribeFromSubscriptionId",value:function(t){this.subscriber.unsubscribeFromSubscriptionId(t)}},{key:"continuePublicationOnException",value:function(){this.publisher.continuePublicationOnException()}},{key:"findSubscriptionByPublisherId",value:function(t){var n=this.subscriber.findSubscriptionByPublisherId(t).concat((0,u.findSubscriptionByRoleAndComponentId)(this.publisher,u.ROLE.PUBLISHER_ID,t));return t===this.getId()?Array.from(new Set(n)):n}},{key:"findSubscriptionsByNotificationAndSubscriberId",value:function(t,n){return this.publisher.findSubscriptionsByNotificationAndSubscriberId(t,n)}},{key:"findSubscriptionBySubscriberId",value:function(t){var n=this.publisher.findSubscriptionBySubscriberId(t).concat((0,u.findSubscriptionByRoleAndComponentId)(this.subscriber,u.ROLE.SUBSCRIBER_ID,t));return t===this.getId()?Array.from(new Set(n)):n}},{key:"stopPublicationOnException",value:function(){this.publisher.stopPublicationOnException()}}])&&r(n.prototype,e),t}();n.default=c},829:function(t,n,e){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function i(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,n){return u=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},u(t,n)}function c(t,n){if(n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}Object.defineProperty(n,"__esModule",{value:!0});var f=e(657),a=e(537),l=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&u(t,n)}(p,t);var n,e,r,f,l=(r=p,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=s(r);if(f){var e=s(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return c(this,t)});function p(){var t;return o(this,p),(t=l.apply(this,arguments)).shouldIStopPublicationOnException=!1,t}return n=p,(e=[{key:"stopPublicationOnException",value:function(){this.shouldIStopPublicationOnException=!0}},{key:"continuePublicationOnException",value:function(){this.shouldIStopPublicationOnException=!1}},{key:"publish",value:function(t,n){var e=this,r=this.notificationsCollection[t];Array.isArray(r)&&r.slice(0).forEach((function(t){try{t.handler(n)}catch(t){if(e.shouldIStopPublicationOnException)throw t}}))}},{key:"findSubscriptionBySubscriberId",value:function(t){return(0,a.findSubscriptionByRoleAndComponentId)(this,a.ROLE.SUBSCRIBER_ID,t)}},{key:"findSubscriptionsByNotificationAndSubscriberId",value:function(t,n){return this.findSubscriptionsByNotification(t).filter((function(t){return t.subscriber_id===n}))}},{key:"addSubscriber",value:function(t,n){this.addSubscription(t,n)}},{key:"removeSubscriber",value:function(t){this.clearSubscription(t)}}])&&i(n.prototype,e),p}(f.default);n.default=l},757:function(t,n,e){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function i(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,n){return u=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},u(t,n)}function c(t,n){if(n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}Object.defineProperty(n,"__esModule",{value:!0});var f=e(657),a=e(113),l=e(537),p=0,b=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&u(t,n)}(y,t);var n,e,r,f,b=(r=y,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=s(r);if(f){var e=s(this).constructor;t=Reflect.construct(n,arguments,e)}else t=n.apply(this,arguments);return c(this,t)});function y(){return o(this,y),b.apply(this,arguments)}return n=y,(e=[{key:"unsubscribeFromSubscriptionId",value:function(t){var n=this.findSubscriptionById(t);if(null===n)throw new a.default(t,this.getId());n.unsubscribe()}},{key:"findSubscriptionByPublisherId",value:function(t){return(0,l.findSubscriptionByRoleAndComponentId)(this,l.ROLE.PUBLISHER_ID,t)}},{key:"unsubscribeFromPublisherId",value:function(t){this.findSubscriptionByPublisherId(t).map((function(t){return t.unsubscribe})).forEach((function(t){t()}))}},{key:"unsubscribeFromNotification",value:function(t){this.findSubscriptionsByNotification(t).map((function(t){return t.unsubscribe})).forEach((function(t){t()}))}},{key:"subscribe",value:function(t,n,e){var r=this,o=this.getNbSubscriptions(),i="sub_".concat(this.getId(),"_to_").concat(t.getId(),"_salt_").concat(o),u={id:i,subscriber_id:this.getId(),publisher_id:t.getId(),unsubscribe:function(){t.removeSubscriber(i),r.removeSubscription(i)},handler:e};this.addSubscription(n,u),t.addSubscriber(n,u)}},{key:"getNbSubscriptions",value:function(){return this.nbSubscriptionRecorded}},{key:"removeSubscription",value:function(t){this.clearSubscription(t)}},{key:"waitUntil",value:function(t){var n=new y("wait-until-".concat(t.map((function(t){return t.name})).join("-and-"),"-salt_").concat(p++));return new Promise((function(e){Promise.all(t.map((function(t){return new Promise((function(e){n.subscribe(t.from,t.name,(function(){e()}))}))}))).then((function(t){n.destroy(),e(t)}))}))}},{key:"findSubscriptionsByNotificationAndPublisherId",value:function(t,n){return this.findSubscriptionsByNotification(t).filter((function(t){return t.publisher_id===n}))}}])&&i(n.prototype,e),y}(f.default);n.default=b},657:function(t,n,e){function r(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(131),i=e(113),u=function(){function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.subscriptionsList={},this.notificationsCollection={},this.nbSubscriptionRecorded=0,this.id=n}var n,e;return n=t,(e=[{key:"getSubscriptions",value:function(){return[].concat.apply([],Object.values(this.notificationsCollection))}},{key:"getNbSubscriptions",value:function(){return this.nbSubscriptionRecorded}},{key:"hasSubscription",value:function(t){return void 0!==this.subscriptionsList[t]}},{key:"recordSubscription",value:function(t,n){this.subscriptionsList[t]=n}},{key:"findSubscriptionIndexById",value:function(t){var n=this.subscriptionsList[t],e={index:-1,notification:null!=n?n:""};if(void 0===n)return e;var r=this.notificationsCollection[n];return Array.isArray(r)&&(e.index=r.findIndex((function(n){return n.id===t}))),e}},{key:"findSubscriptionById",value:function(t){var n=this.findSubscriptionIndexById(t);return n.index<0?null:this.notificationsCollection[n.notification][n.index]}},{key:"findSubscriptionsByNotification",value:function(t){return this.notificationsCollection[t]||[]}},{key:"clearSubscription",value:function(t){var n=this.findSubscriptionIndexById(t);if(n.index<0)throw new i.default(t,this.getId());var e=this.notificationsCollection[n.notification].splice(n.index,1)[0];"function"==typeof e.handler&&delete e.handler,delete this.subscriptionsList[t],this.nbSubscriptionRecorded--,0===this.notificationsCollection[n.notification].length&&delete this.notificationsCollection[n.notification]}},{key:"addSubscription",value:function(t,n){if(!0!==Array.isArray(this.notificationsCollection[t])&&(this.notificationsCollection[t]=[]),this.hasSubscription(n.id))throw new o.default(n.id,this.getId());this.notificationsCollection[t].push(n),this.recordSubscription(n.id,t),this.nbSubscriptionRecorded++}},{key:"getId",value:function(){return this.id}},{key:"is",value:function(t){return t===this.getId()}},{key:"destroy",value:function(){Object.values(this.notificationsCollection).forEach((function(t){t.forEach((function(t){return t.unsubscribe()}))}))}}])&&r(n.prototype,e),t}();n.default=u}},n={};function e(r){var o=n[r];if(void 0!==o)return o.exports;var i=n[r]={exports:{}};return t[r](i,i.exports,e),i.exports}var r={};return function(){var t=r;Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionNotFoundException=t.SubscriptionAlreadyExistsException=t.InvalidArgumentException=t.SubscriberHelper=t.PublisherSubscriber=t.Subscriber=t.Publisher=void 0;var n=e(829);Object.defineProperty(t,"Publisher",{enumerable:!0,get:function(){return n.default}});var o=e(757);Object.defineProperty(t,"Subscriber",{enumerable:!0,get:function(){return o.default}});var i=e(986);Object.defineProperty(t,"PublisherSubscriber",{enumerable:!0,get:function(){return i.default}}),t.SubscriberHelper=e(322);var u=e(66);Object.defineProperty(t,"InvalidArgumentException",{enumerable:!0,get:function(){return u.default}});var c=e(131);Object.defineProperty(t,"SubscriptionAlreadyExistsException",{enumerable:!0,get:function(){return c.default}});var s=e(113);Object.defineProperty(t,"SubscriptionNotFoundException",{enumerable:!0,get:function(){return s.default}})}(),r}()}));